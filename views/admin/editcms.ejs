<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Edit Content</title>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="/images/icons/favicon.ico" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/bootstrap/css/bootstrap.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/fonts/font-awesome-4.7.0/css/font-awesome.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/fonts/iconic/css/material-design-iconic-font.min.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/vendor/animate/animate.css" />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/css-hamburgers/hamburgers.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/animsition/css/animsition.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/select2/select2.min.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/daterangepicker/daterangepicker.css"
    />
    <!--===============================================================================================-->
    <link
      rel="stylesheet"
      type="text/css"
      href="/vendor/noui/nouislider.min.css"
    />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/css/util.css" />
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <style>
      table {
        width: 100%;
        padding-right: 10px;
      }
      .sidebar-container {
        position: fixed;
        width: 260px;
        height: 100%;
        left: 0;
        overflow-x: hidden;
        overflow-y: auto;
        flex-direction: column;
        background: #1a1a1a;
        color: #fff;
      }
      .content-container {
        padding-top: 20px;
      }
      .sidebar-logo {
        padding: 0 auto;
        background: #1a1a1a;
        height: auto;
      }
      .sidebar-navigation {
        padding: 0;
        margin: 0;
        list-style-type: none;
        position: relative;
      }
      .sidebar-navigation li {
        background-color: transparent;
        position: relative;
        display: inline-block;
        width: 100%;
        line-height: 20px;
      }
      .sidebar-navigation li a {
        padding: 10px 15px 10px 30px;
        display: block;
        color: #fff;
      }
      .sidebar-navigation li .fa {
        margin-right: 10px;
      }
      .sidebar-navigation li a:active,
      .sidebar-navigation li a:hover,
      .sidebar-navigation li a:focus {
        text-decoration: none;
        outline: none;
      }
      .sidebar-navigation li::before {
        background-color: #2574a9;
        position: absolute;
        content: "";
        height: 100%;
        left: 0;
        top: 0;
        -webkit-transition: width 0.2s ease-in;
        transition: width 0.2s ease-in;
        width: 3px;
        z-index: -1;
      }
      .sidebar-navigation li:hover::before {
        width: 100%;
      }
      .sidebar-navigation .header {
        font-size: 12px;
        text-transform: uppercase;
        background-color: #151515;
        padding: 10px 15px 10px 30px;
      }
      h6 {
        font-size: 18px;
        line-height: 25px;
      }
      .sidebar-navigation .header::before {
        background-color: transparent;
      }
      .content-container {
        padding-left: 220px;
      }
    </style>

    <!--===============================================================================================-->
  </head>

  <body>
    <div class="full_height" style="display: flex; flex-direction: column;">
      <div class="pos-f-t" style="background-color: #1a1a1a;">
        <!-- <div class="collapse" id="navbarToggleExternalContent">
          
      </div> -->
        <nav class="navbar navbar-dark">
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarToggleExternalContent"
            aria-controls="navbarToggleExternalContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div>
            <h4 class="text-white">
              Pulze
              <small
                class="text-white"
                style="font-family: cursive; font-size: 15px;"
                >Giveaway</small
              >
            </h4>
          </div>
        </nav>
      </div>
      <div class="sidebar-container">
        <div class="sidebar-logo text-center">
          <br /><br />
          <!-- <img src="/images/icons/LOGO.png" width="100%" height="auto" /> -->
        </div>
        <br />
        <%- include('../layouts/sidebar') -%>
      </div>
      <div class="container-contact100">
        <div class="wrap-contact100">
          <!-- <form class="contact100-form validate-form"> -->
          <span class="contact100-form-title">
            Edit Web Content
          </span>

          <div
            class="wrap-input100 validate-input bg1"
            data-validate="Please Type the Overlay text"
          >
            <span class="label-input100">OverLay Text *</span>
            <input
              class="input100"
              type="text"
              name="overlay_text"
              value="<%=locals.text%>"
              id="overlay_text"
              placeholder="Enter Overlay Text"
            />
          </div>
          <div class="container-contact100-form-btn">
            <button class="btn contact100-form-btn" type="button" id="btnhead">
              <span>
                Update Heading
                <i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
              </span>
            </button>
          </div>
          <br />
          <br />
          <div
            class="wrap-input100 validate-input bg1"
            data-validate="Please Type the Overlay text"
          >
            <span class="label-input100">App store Link *</span>
            <input
              class="input100"
              type="text"
              name="appstore_link"
              id="appstore_link"
              value="<%=locals.appstore%>"
              placeholder="Enter App Store Link"
            />
          </div>
          <br />
          <div
            class="wrap-input100 validate-input bg1"
            data-validate="Please Type the Overlay text"
          >
            <span class="label-input100">Play store Link *</span>
            <input
              class="input100"
              type="text"
              name="playstore_link"
              id="playstore_link"
              value="<%=locals.playstore%>"
              placeholder="Enter Play Store Link"
            />
            <!-- value="<%=locals.appstore_link%>" -->
          </div>
          <div class="container-contact100-form-btn">
            <button class="btn contact100-form-btn" type="button" id="btnlink">
              <span>
                Update Links
                <i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
              </span>
            </button>
          </div>
          <br />
          <br />

          <% if(locals.image && locals.image!=="" && locals.image!==null &&
          locals.image!==undefined){ %>
          <strong>Current Image : </strong>
          <img class="img-fluid" src="/<%=locals.image%>" />
          <br />
          <br />
          <% } %>

          <form
            method="POST"
            action=""
            id="frmimage"
            enctype="multipart/form-data"
          >
            <div class="wrap-input100 validate-input bg1" data-validate="">
              <span class="label-input100">Heading Image</span>
              <input
                class="input100"
                type="file"
                name="image"
                placeholder="Upload Heading Image"
                id="headingimage"
              />
            </div>

            <div class="container-contact100-form-btn">
              <button
                class="btn contact100-form-btn"
                type="submit"
                form="frmimage"
                id="btnimage"
              >
                <span>
                  Update Image
                  <i
                    class="fa fa-long-arrow-right m-l-7"
                    aria-hidden="true"
                  ></i>
                </span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <%- include('../layouts/foot') -%>
    <!--===============================================================================================-->
    <script src="/vendor/jquery/jquery-3.2.1.min.js"></script>
    <!--===============================================================================================-->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- <script src="js/jquery.js"></script> -->
    <script src="/js/moment.min.js"></script>
    <script src="/js/combodate.js"></script>
    <!--===============================================================================================-->
    <script src="/vendor/animsition/js/animsition.min.js"></script>
    <!--===============================================================================================-->
    <script src="/vendor/bootstrap/js/popper.js"></script>
    <script src="/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/index.js"></script>
    <!--===============================================================================================-->
    <script src="/vendor/select2/select2.min.js"></script>
    <script>
      $("document").ready(function () {
        $("#btnhead").click(function () {
          if ($("#overlay_text").val() === "") {
            swal("Heading is empty.");
            return false;
          }
          let text = $("#overlay_text").val();
          let data = {
            text,
          };
          $.ajax({
            method: "POST",
            url: "/api/v1/general/changetext",
            headers: { Authorization: "Bearer " + Cookies.get("token") },
            data,
          })
            .then((d) => {
              swal({
                title: `Heading text is changed.`,
                buttons: false,
                timer: 3000,
              }).then(() => {
                location.replace("/admin/content/update");
              });
            })
            .fail((e) => {
              swal({
                title: `${e.responseJSON.message}`,
              });
            });
        });
        $("#btnlink").click(function () {
          if (
            $("#appstore_link").val() === "" ||
            $("#playstore_link").val() === ""
          ) {
            swal("Links are empty.");
            return false;
          }
          let appstore_link = $("#appstore_link").val();
          let playstore_link = $("#playstore_link").val();

          let data = {
            appstore_link,
            playstore_link,
          };
          $.ajax({
            method: "POST",
            url: "/api/v1/general/changelink",
            headers: { Authorization: "Bearer " + Cookies.get("token") },
            data,
          })
            .then((d) => {
              swal({
                title: `Links are changed.`,
                buttons: false,
                timer: 3000,
              }).then(() => {
                location.replace("/admin/content/update");
              });
            })
            .fail((e) => {
              swal({
                title: `${e.responseJSON.message}`,
              });
            });
        });
        $("#frmimage").on("submit", function (e) {
          e.preventDefault();

          if ($("input[name=image]").val() === "") {
            swal({
              title: `Image is not selected. Please select an image and try again.`,
            });
            return false;
          }

          let image = new FormData(this);

          $.ajax({
            url: "/api/v1/general/changeimage",
            type: "POST",
            headers: { Authorization: "Bearer " + Cookies.get("token") },
            data: image,
            contentType: false,
            cache: false,
            processData: false,
          })
            .then((d) => {
              swal({
                title: `Image is changed.`,
                buttons: false,
                timer: 3000,
              }).then(() => {
                location.replace("/admin/content/update");
              });
            })
            .fail((e) => {
              swal({
                title: `${e.responseJSON.message}`,
              });
            });
        });
      });
    </script>
    <!--===============================================================================================-->
    <script src="/vendor/daterangepicker/moment.min.js"></script>
    <script src="/vendor/daterangepicker/daterangepicker.js"></script>
    <!--===============================================================================================-->
    <script src="/vendor/countdowntime/countdowntime.js"></script>
    <!--===============================================================================================-->
    <!--===============================================================================================-->
    <script src="/js/main.js"></script>
  </body>
</html>
